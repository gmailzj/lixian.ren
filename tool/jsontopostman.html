
<html>
<head>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
    <meta charset="utf-8"/>
    <meta name="applicable-device" content="pc,mobile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>JSON互转postman参数</title>
    <meta name="Keywords" content="JSON互转postman"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.5/dist/css/bootstrap.min.css"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.5/dist/css/bootstrap.min.js"></script>
	<style>
        .p_tab {
            border: 1px;
        }

        button {
            margin-top: 10px;
        }
    </style>


</head>
<body>
 
<div class="col-lg-12" style="margin-top: 33px;"></div>
    <div class="container">
        <h1>JSON互转postman参数</h1>
        <div class="row">
            <div class="col-lg-5">
            <textarea class="form-control" rows="20" id="input">{"uid":"58831","nickname":"world","email":"world@qq.com","token":"0x123521"}
</textarea>
            </div>
            <div class="col-lg-2">
                <button class="btn btn-success" onclick="jsontopostman()" data-toggle="tooltip" data-placement="top" title="在输入参数地方，Bulk Edit编辑参数输入！">JSON转postman</button>
                <button class="btn btn-primary" onclick="postmantojson()" data-toggle="tooltip" data-placement="top" title="将Bulk Edit的参数转成json数据">postman转JSON</button>
            </div>
            <div class="col-lg-5">
                <textarea class="form-control" rows="20" id="result"></textarea>
            </div>
        </div>
    </div>
    <script type="text/javascript">var formatJson = function (json, options) {
    var reg = null,
        formatted = '',
        pad = 0,
        PADDING = '    '; // one can also use '\t' or a different number of spaces

    // optional settings
    options = options || {};
    // remove newline where '{' or '[' follows ':'
    options.newlineAfterColonIfBeforeBraceOrBracket = (options.newlineAfterColonIfBeforeBraceOrBracket === true) ? true : false;
    // use a space after a colon
    options.spaceAfterColon = (options.spaceAfterColon === false) ? false : true;

    // begin formatting...
    if (typeof json !== 'string') {
        // make sure we start with the JSON as a string
        json = JSON.stringify(json);
    } else {
        // is already a string, so parse and re-stringify in order to remove extra whitespace
        json = JSON.parse(json);
        json = JSON.stringify(json);
    }

    // add newline before and after curly braces
    reg = /([\{\}])/g;
    json = json.replace(reg, '\r\n$1\r\n');

    // add newline before and after square brackets
    reg = /([\[\]])/g;
    json = json.replace(reg, '\r\n$1\r\n');

    // add newline after comma
    reg = /(\,)/g;
    json = json.replace(reg, '$1\r\n');

    // remove multiple newlines
    reg = /(\r\n\r\n)/g;
    json = json.replace(reg, '\r\n');

    // remove newlines before commas
    reg = /\r\n\,/g;
    json = json.replace(reg, ',');

    // optional formatting...
    if (!options.newlineAfterColonIfBeforeBraceOrBracket) {
        reg = /\:\r\n\{/g;
        json = json.replace(reg, ':{');
        reg = /\:\r\n\[/g;
        json = json.replace(reg, ':[');
    }
    if (options.spaceAfterColon) {
        reg = /\:/g;
        json = json.replace(reg, ': ');
    }

    $.each(json.split('\r\n'), function (index, node) {
        var i = 0,
            indent = 0,
            padding = '';

        if (node.match(/\{$/) || node.match(/\[$/)) {
            indent = 1;
        } else if (node.match(/\}/) || node.match(/\]/)) {
            if (pad !== 0) {
                pad -= 1;
            }
        } else {
            indent = 0;
        }

        for (i = 0; i < pad; i++) {
            padding += PADDING;
        }

        formatted += padding + node + '\r\n';
        pad += indent;
    });

    return formatted;
};</script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });

        function jsontopostman() {
            var input = $('#input').val();
            if (input == '') {
                layer.msg('输入需要转换内容!');
                return;
            }
            var result = "";
            try {
                input = eval("(" + input + ")");
            } catch (e) {
                layer.msg("JSON格式不正确！" + e.message);
                return;
            }
            for (let k in input) {
                result += k + ":" + input[k] + "\r\n";
            }
            $('#result').val(result);
        }

        function postmantojson() {
            var input = $('#input').val();
            if (input == '') {
                layer.msg('输入需要转换内容!');
                return;
            }
            var result = {}
            input = input.split("\n");
            for (var i = 0; i < input.length; i++) {
                var tmp = input[i];
                tmp = tmp.split(':');
                var key = trim(tmp[0]), value = trim(tmp[1]);
                if (key == "") {
                    continue;
                }
                result[key] = value;
            }
            $('#result').val(formatJson(result));
        }

        function trim(str) {
            if (str == "" || str == undefined) {
                return str;
            }
            return str.replace(/(^\s*)|(\s*$)/g, "");
        }
    </script>





 
    <link href="/Public/youce/css/style.css" rel="stylesheet" type="text/css">



</body>
</html>